*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,Helvetica,sans-serif;background:#e0eff9;color:#333;min-height:100vh}#app{width:100%;min-height:100vh;padding:20px}header{text-align:center;padding:15px 20px;background:#f5f5f5;color:#333;border-radius:0;box-shadow:0 4px 6px #0000001a;margin-bottom:20px}.header-content{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;max-width:1200px;margin:0 auto}.title-row{display:flex;align-items:center;gap:12px}.header-icon{height:50px;width:auto}.header-text{text-align:center;display:flex;flex-direction:column;align-items:center;gap:4px}header h1{font-size:2.5em;color:#4a3b5c;margin:0}.subtitle{font-size:1.1em;color:#5a4a6c;font-weight:400;max-width:800px;margin:3px 0;line-height:1.4}.authors{font-size:.9em;color:#555;max-width:900px;margin:5px 0 0;line-height:1.5}.authors p{margin:0}.header-buttons{display:flex;gap:12px;margin-top:8px}.header-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:#2c3e50;color:#fff;text-decoration:none;border-radius:25px;font-size:14px;font-weight:600;transition:all .3s ease;box-shadow:0 2px 4px #0003}.header-btn:hover{background:#34495e;transform:translateY(-2px);box-shadow:0 4px 8px #0000004d}.header-btn i{font-size:16px}header p{color:#7f8c8d;font-size:1.1em;margin:0}.container{display:grid;grid-template-columns:320px 1fr;gap:20px;max-width:1800px;margin:0 auto}.control-panel{background:#fff;border-radius:10px;padding:16px;box-shadow:0 4px 6px #0000001a;height:fit-content}.control-section h3,.state-display h3{margin-bottom:12px;color:#2c3e50;border-bottom:2px solid #7B68A6;padding-bottom:6px}.control-group{margin-bottom:15px}.control-group label{display:block;margin-bottom:8px;font-weight:600;color:#34495e}select{width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;font-size:14px;background:#fff;cursor:pointer;transition:border-color .3s}select:hover{border-color:#7b68a6}.radio-group{display:flex;flex-direction:column;gap:8px}.radio-group label{display:flex;align-items:center;cursor:pointer;padding:8px;border-radius:5px;transition:background .3s}.radio-group label:hover{background:#ecf0f1}.radio-group input[type=radio]{margin-right:8px}.info-icon{display:inline-block;margin-left:6px;color:#7b68a6;font-size:16px;cursor:help;font-weight:700;transition:color .3s}.info-icon:hover{color:#6a5795;transform:scale(1.2)}.tooltip-content{background:#2c3e50;color:#fff;padding:12px;border-radius:6px;margin-top:8px;font-size:13px;line-height:1.5;box-shadow:0 2px 8px #0003;animation:fadeIn .2s ease-in}@keyframes fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.accuracy-note{margin-top:8px;padding:8px 10px;background:#fff3cd;border:1px solid #ffc107;border-radius:5px;font-size:12px;color:#856404;display:flex;align-items:center;gap:6px}.accuracy-note i{color:#856404}.radio-group label.disabled{opacity:.5;cursor:not-allowed}.radio-group label.disabled:hover{background:transparent}.checkbox-group{display:flex;flex-direction:column;gap:8px;margin-top:8px}.checkbox-group label{display:flex;align-items:center;cursor:pointer;padding:8px;border-radius:5px;transition:background .3s;font-weight:400}.checkbox-group label:hover{background:#ecf0f1}.checkbox-group input[type=checkbox]{margin-right:8px;width:16px;height:16px;cursor:pointer}.slider-group{margin-bottom:8px}.slider-group label{display:flex;justify-content:space-between;margin-bottom:5px;font-size:13px}input[type=range]{width:100%;height:6px;border-radius:3px;background:#ddd;outline:none;-webkit-appearance:none}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:18px;height:18px;border-radius:50%;background:#7b68a6;cursor:pointer;transition:background .3s}input[type=range]::-webkit-slider-thumb:hover{background:#6a5795}input[type=range]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:#7b68a6;cursor:pointer;border:none}.button-group{display:flex;gap:8px;margin-bottom:8px}.btn{flex:1;padding:10px;border:none;border-radius:5px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.btn-primary{background:#7b68a6;color:#fff}.btn-primary:hover:not(:disabled){background:#6a5795;transform:translateY(-2px);box-shadow:0 4px 8px #3498db4d}.btn-secondary{background:#95a5a6;color:#fff}.btn-secondary:hover:not(:disabled){background:#7f8c8d}.btn-upload{background:#27ae60;color:#fff;width:100%;display:flex;align-items:center;justify-content:center;gap:8px}.btn-upload:hover{background:#229954}.btn:disabled{opacity:.5;cursor:not-allowed}.csv-upload-group{border-top:2px solid #ecf0f1;padding-top:10px;margin-top:10px}.status-message{margin-top:6px;padding:6px 8px;border-radius:4px;font-size:12px;line-height:1.3}.status-info{background:#d1ecf1;border:1px solid #bee5eb;color:#0c5460}.status-success{background:#d4edda;border:1px solid #c3e6cb;color:#155724}.status-error{background:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.upload-notice{margin-top:6px;padding:6px 8px;background:#fff3cd;border:1px solid #ffeaa7;border-radius:4px;font-size:11px;color:#856404;line-height:1.3}#upload-progress-container{margin-top:6px;position:relative;width:100%;height:20px;background:#ecf0f1;border-radius:4px;overflow:hidden;border:1px solid #bdc3c7}.upload-progress-bar{height:100%;background:linear-gradient(90deg,#27ae60,#2ecc71);width:0%;transition:width .3s ease;border-radius:5px}.upload-progress-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:12px;font-weight:600;color:#2c3e50;z-index:1}.progress-container{width:100%;height:8px;background:#ecf0f1;border-radius:4px;overflow:hidden;margin-top:8px}.progress-bar{height:100%;background:linear-gradient(90deg,#7b68a6,#2ecc71);width:0%;transition:width .1s linear}.state-display{margin-top:20px;padding:15px;background:#f8f9fa;border-radius:8px}.state-display-overlay{position:absolute;top:10px;right:10px;background:#fffffff2;border-radius:8px;padding:12px;box-shadow:0 4px 8px #0003;z-index:100;min-width:200px}.state-display-overlay h3{margin-bottom:10px;color:#2c3e50;font-size:14px;border-bottom:2px solid #7B68A6;padding-bottom:6px;display:flex;align-items:center;justify-content:space-between}.state-display-overlay h3 .info-icon{font-size:14px;margin-left:5px}.state-display-overlay .state-values{display:flex;flex-direction:column;gap:8px}.state-display-overlay .state-item{display:flex;align-items:center;padding:6px;background:#fff;border-radius:4px;border-left:3px solid #7B68A6}.state-display-overlay .state-label{font-weight:600;color:#2c3e50;width:60px;font-size:12px}.state-display-overlay .state-value{font-size:14px;font-weight:700;color:#7b68a6;margin:0 6px;flex:1;text-align:right}.state-display-overlay .state-unit{color:#7f8c8d;font-size:11px;width:30px}.state-values{display:flex;flex-direction:column;gap:10px}.state-item{display:flex;align-items:center;padding:8px;background:#fff;border-radius:5px;border-left:4px solid #7B68A6}.state-label{font-weight:600;color:#2c3e50;width:80px}.state-value{font-size:1.2em;font-weight:700;color:#7b68a6;margin:0 8px;flex:1;text-align:right}.state-unit{color:#7f8c8d;font-size:.9em;width:40px}.kappa-edit-btn{background:none;border:none;color:#7b68a6;font-size:14px;cursor:pointer;padding:4px 6px;margin-left:6px;transition:all .2s ease;border-radius:4px}.kappa-edit-btn:hover{transform:scale(1.15);color:#6a5795;background:#7b68a61a}.viz-container{display:flex;flex-direction:column;gap:20px}.top-row{display:grid;grid-template-columns:2fr 1fr;gap:20px}.scene-wrapper{position:relative;background:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a;height:500px;overflow:hidden}.scene-container{width:100%;height:100%}.drawing-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:#fffffff2;z-index:1000;display:flex;flex-direction:column;align-items:center;justify-content:center}.drawing-instructions{text-align:center;margin-bottom:20px}.drawing-instructions h3{color:#2c3e50;margin-bottom:8px}.drawing-instructions p{color:#7f8c8d;font-size:14px}.drawing-hint{color:#f7941d!important;font-weight:600;margin-top:8px!important}#drawing-canvas{border:3px dashed #7B68A6;background:#fff;cursor:crosshair;box-shadow:0 4px 8px #0000001a;border-radius:8px}.drawing-controls{margin-top:20px;display:flex;gap:10px}.chart-container{background:#fff;border-radius:10px;padding:20px;box-shadow:0 4px 6px #0000001a;height:300px;position:relative}#power-chart{width:100%!important;height:240px!important}.metrics{display:flex;justify-content:space-around;margin-top:10px;padding-top:10px;border-top:2px solid #ecf0f1;gap:20px}.metrics span{font-weight:600;color:#34495e;font-size:14px}.btn-export-overlay{position:absolute;top:10px;right:10px;width:40px;height:40px;padding:0;background:#7b68a6e6;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;transition:all .3s ease;box-shadow:0 2px 6px #0003;z-index:10;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.btn-export-overlay:hover{background:#6a5795;transform:scale(1.1);box-shadow:0 4px 12px #0000004d}.btn-export-overlay:active{transform:scale(.95)}.btn-reset-zoom-overlay{position:absolute;top:10px;left:10px;width:40px;height:40px;padding:0;background:#7b68a6e6;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;transition:all .3s ease;box-shadow:0 2px 6px #0003;z-index:10;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.btn-reset-zoom-overlay:hover{background:#6a5795;transform:scale(1.1);box-shadow:0 4px 12px #0000004d}.btn-reset-zoom-overlay:active{transform:scale(.95)}.equation-box{background:#fff;border:2px solid #7B68A6;border-radius:10px;padding:20px;box-shadow:0 4px 6px #0000001a;height:500px;display:flex;flex-direction:column}.equation-box h3{margin-bottom:15px;font-size:18px;color:#2c3e50;border-bottom:2px solid #7B68A6;padding-bottom:10px}.equation{background:#f8f9fa;border:2px solid #7B68A6;color:#2c3e50;padding:25px 20px;border-radius:8px;font-size:20px;text-align:center;margin-bottom:15px;min-height:80px;display:flex;align-items:center;justify-content:center}.equation em{font-style:italic;font-weight:700;color:#f7941d}.equation-description{background:#f8f9fa;padding:15px;border-radius:8px;line-height:1.6;flex:1;text-align:left}.equation-description p{margin:0;font-size:14px;color:#2c3e50}.equation-description strong{color:#f7941d;font-weight:700}.background-description{background:#f8f9fa;padding:15px;border-radius:8px;line-height:1.6;margin-bottom:15px;text-align:left}.background-description p{margin:0;font-size:14px;color:#2c3e50}@media (max-width: 1200px){.container{grid-template-columns:1fr}.control-panel{max-width:600px;margin:0 auto}.top-row{grid-template-columns:1fr}.equation-box{height:auto}}.mobile-controls{display:none}@media (max-width: 768px){header h1{font-size:1.5em}header p{font-size:.9em}#app{padding:10px}.control-panel{display:none!important}.mobile-controls{display:block!important;position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:50}.mobile-control{pointer-events:all;position:absolute;background:#fffffff2;border-radius:8px;padding:8px;box-shadow:0 2px 8px #0003}.mobile-trajectory{top:10px;left:10px}.mobile-trajectory select{font-size:.85em;padding:6px 10px;border:1px solid #7B68A6;border-radius:6px;background:#fff}.mobile-model{display:none!important}.mobile-light-arrows{top:10px;right:10px;display:flex;gap:10px}.mobile-animation{bottom:10px;left:50%;transform:translate(-50%);display:flex;gap:8px}.anim-btn{width:40px;height:40px;border:2px solid #7B68A6;background:#fff;border-radius:6px;font-size:1.1em;cursor:pointer;transition:all .2s}.anim-btn:disabled{opacity:.5;cursor:not-allowed}.anim-btn:not(:disabled):active{transform:scale(.95);background:#7b68a6;color:#fff}.arrow-group{display:flex;flex-direction:column;align-items:center}.arrow-row{display:flex;align-items:center;gap:4px}.arrow-center{font-size:1.2em;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.arrow-z{display:flex;flex-direction:column;gap:4px}.arrow-btn{width:32px;height:32px;border:2px solid #7B68A6;background:#fff;border-radius:6px;font-size:1em;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.arrow-btn:active{transform:scale(.95);background:#7b68a6;color:#fff}.equation-box,.state-display-overlay{display:none!important}.container{grid-template-columns:1fr}.viz-area{grid-template-columns:1fr!important;gap:10px}.scene-container{height:350px}.scene-wrapper{height:350px;margin-bottom:0;overflow:hidden}.chart-container{height:250px;margin-top:10px}#power-chart{height:180px!important}}.loading{display:flex;align-items:center;justify-content:center;height:100%;font-size:1.2em;color:#7f8c8d}.loading:after{content:"...";animation:dots 1.5s steps(3,end) infinite}@keyframes dots{0%,20%{content:"."}40%{content:".."}60%,to{content:"..."}}.modal{position:fixed;z-index:2000;left:0;top:0;right:0;bottom:0;width:100%;height:100%;display:none;align-items:center;justify-content:center;overflow:auto}.modal:before{content:"";position:fixed;left:0;top:0;right:0;bottom:0;background:#0009;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);z-index:-1}.modal-content{background:#fff;border-radius:12px;width:90%;max-width:550px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0000004d;animation:modalFadeIn .3s ease}@keyframes modalFadeIn{0%{opacity:0;transform:scale(.9) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.modal-header{padding:20px 24px;border-bottom:2px solid #ecf0f1;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,#7b68a6,#6a5795);color:#fff;border-radius:12px 12px 0 0}.modal-header h3{margin:0;font-size:1.3em}.modal-close{background:none;border:none;font-size:32px;color:#fff;cursor:pointer;transition:transform .2s;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.modal-close:hover{transform:scale(1.2) rotate(90deg)}.modal-body{padding:24px}.kappa-info{background:#f8f9fa;padding:16px;border-radius:8px;margin-bottom:24px;border-left:4px solid #7B68A6}.kappa-info p{margin:8px 0;font-size:14px}.kappa-info strong{color:#2c3e50}.kappa-note{font-size:12px!important;color:#7f8c8d;font-style:italic;margin-top:12px!important}.kappa-options{display:flex;flex-direction:column;gap:16px}.radio-option{padding:16px;border:2px solid #ecf0f1;border-radius:8px;transition:all .3s ease;cursor:pointer}.radio-option:hover{border-color:#bdc3c7;background:#f8f9fa}.radio-option:has(input:checked){border-color:#7b68a6;background:#7b68a60d;box-shadow:0 2px 8px #7b68a626}.radio-option label{display:block;cursor:pointer;margin-left:8px}.radio-option strong{display:block;color:#2c3e50;margin-bottom:4px}.option-desc{display:block;font-size:13px;color:#7f8c8d;margin-top:6px}.manual-input-group,.physics-input-group{margin-top:12px;padding:12px;background:#fff;border-radius:6px;border:1px solid #e1e8ed}.manual-input-group input[type=text],.physics-input-group input[type=number]{width:100%;padding:10px;border:2px solid #ecf0f1;border-radius:6px;font-size:14px;transition:border-color .3s}.manual-input-group input:focus,.physics-input-group input:focus{outline:none;border-color:#7b68a6}.input-hint{display:block;font-size:12px;color:#95a5a6;margin-top:6px}.input-row{margin-bottom:12px}.input-row label{display:block;font-size:13px;font-weight:600;color:#34495e;margin-bottom:6px}.calculated-info{margin-top:12px;padding:10px;background:#e8f5e9;border-radius:6px;font-size:13px}.calculated-result{margin-top:12px;padding:10px;background:#e3f2fd;border-radius:6px;font-size:14px;font-weight:600;color:#1976d2}#calculate-physics-btn{margin-top:8px;width:100%}.modal-footer{padding:16px 24px;border-top:2px solid #ecf0f1;display:flex;justify-content:flex-end;gap:12px;background:#f8f9fa;border-radius:0 0 12px 12px}.modal-footer .btn{min-width:100px}.control-section h3{display:flex;align-items:center;justify-content:space-between}.settings-icon-btn{background:none;border:none;color:#7b68a6;font-size:1.1em;cursor:pointer;padding:6px;border-radius:50%;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.settings-icon-btn:hover{background:#7b68a626;transform:rotate(45deg)}.settings-icon-btn:active{transform:rotate(90deg)}.settings-modal-content{max-width:550px;max-height:85vh;overflow-y:auto}.settings-section{background:#f8f9fa;border-radius:8px;padding:16px;margin-bottom:16px}.settings-section:last-child{margin-bottom:0}.settings-section h4{font-size:1em;color:#4a3b5c;margin:0 0 12px;display:flex;align-items:center;gap:8px;padding-bottom:8px;border-bottom:1px solid #e0e0e0}.settings-section h4 i{color:#7b68a6}.section-desc{font-size:.85em;color:#666;margin:-8px 0 12px}.settings-radio-group{display:flex;flex-direction:column;gap:8px}.settings-radio-label{display:flex;align-items:flex-start;gap:12px;padding:12px;background:#fff;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s ease}.settings-radio-label:hover{border-color:#7b68a6}.settings-radio-label input[type=radio]{margin-top:3px;accent-color:#7B68A6}.settings-radio-label input[type=radio]:checked+.radio-content strong{color:#7b68a6}.settings-radio-label:has(input:checked){border-color:#7b68a6;background:#7b68a60d}.radio-content{display:flex;flex-direction:column;gap:4px}.radio-content strong{font-size:.95em;color:#333}.radio-desc{font-size:.8em;color:#666;line-height:1.4}.settings-input-row{display:flex;align-items:center;gap:12px;margin-bottom:12px}.settings-input-row:last-child{margin-bottom:0}.settings-input-row label{flex:1;font-size:.9em;color:#333}.settings-input-row input[type=number]{width:100px;padding:8px 12px;border:2px solid #e0e0e0;border-radius:6px;font-size:.95em;text-align:right;transition:border-color .2s ease}.settings-input-row input[type=number]:focus{outline:none;border-color:#7b68a6}.settings-input-row .input-hint{font-size:.75em;color:#888;flex:1}.integration-stats{background:#fff;border-radius:6px;padding:12px;margin-top:12px}.integration-stats p{margin:4px 0;font-size:.85em;color:#555}.integration-stats strong{color:#7b68a6}.settings-note{font-size:.8em;color:#888;margin-top:12px;display:flex;align-items:center;gap:6px}.settings-note i{color:#7b68a6}.settings-section-readonly{background:#f0f0f0;opacity:.9}.readonly-values{display:flex;flex-direction:column;gap:8px}.readonly-item{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px dashed #ddd}.readonly-item:last-child{border-bottom:none}.readonly-label{font-size:.85em;color:#666}.readonly-value{font-size:.85em;color:#333;font-family:Courier New,monospace;background:#fff;padding:4px 8px;border-radius:4px}.settings-modal-content .modal-footer{display:flex;justify-content:space-between;align-items:center}.settings-modal-content .modal-footer .footer-right{display:flex;gap:12px}#settings-reset-btn{color:#e74c3c;border-color:#e74c3c;background:transparent}#settings-reset-btn:hover{background:#e74c3c1a}
